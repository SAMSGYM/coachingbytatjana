<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Coaching by Tatjana - Tatjana</title>
    
    <!-- PWA / Install to Homescreen -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Coaching">
    <meta name="application-name" content="Coaching by Tatjana">
    <meta name="theme-color" content="#C4A484">
    <meta name="msapplication-TileColor" content="#C4A484">
    
    <!-- App Icon -->
    <link rel="manifest" href="data:application/json,%7B%22name%22%3A%22Coaching%20by%20Tatjana%22%2C%22short_name%22%3A%22Coaching%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%23FDF9F6%22%2C%22theme_color%22%3A%22%23C4A484%22%7D">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23C4A484' width='100' height='100' rx='20'/><text x='50' y='65' font-size='50' text-anchor='middle' fill='white'>üíú</text></svg>">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%23C4A484' width='100' height='100' rx='20'/><text x='50' y='65' font-size='50' text-anchor='middle' fill='white'>üíú</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Nunito:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        
        :root {
            --primary: #C4A484;
            --primary-light: #E8DDD4;
            --primary-dark: #A68B6A;
            --accent: #D4A5A5;
            --accent-light: #F5E6E6;
            --text-dark: #3D3D3D;
            --text-light: #6B6B6B;
            --bg-cream: #FDF9F6;
            --bg-white: #FFFFFF;
            --success: #7FB285;
            --success-light: #E8F5EA;
            --coach-color: #8B5CF6;
            --coach-light: #EDE9FE;
            --shadow: 0 4px 20px rgba(196, 164, 132, 0.15);
            --shadow-hover: 0 8px 30px rgba(196, 164, 132, 0.25);
            --radius: 16px;
            --radius-sm: 10px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background: var(--bg-cream);
            color: var(--text-dark);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            padding: 1.5rem 1rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header.coach-mode {
            background: linear-gradient(135deg, var(--coach-color) 0%, #A78BFA 100%);
        }

        .logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            font-weight: 600;
            color: white;
            letter-spacing: 1px;
        }

        .logo span {
            font-style: italic;
            font-weight: 400;
        }

        .subtitle {
            font-size: 0.85rem;
            color: rgba(255,255,255,0.9);
            margin-top: 0.25rem;
            font-weight: 500;
        }

        .client-name-display {
            font-size: 1rem;
            color: white;
            margin-top: 0.5rem;
            font-weight: 600;
            background: rgba(255,255,255,0.2);
            padding: 0.3rem 1rem;
            border-radius: 20px;
            display: inline-block;
        }

        /* Mode Toggle */
        .mode-toggle {
            padding: 0.75rem;
            background: var(--bg-white);
            border-bottom: 1px solid var(--primary-light);
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }

        .mode-btn {
            padding: 0.6rem 1.5rem;
            border: 2px solid var(--primary-light);
            border-radius: 25px;
            background: var(--bg-white);
            font-family: inherit;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-btn:hover {
            border-color: var(--primary);
        }

        .mode-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .mode-btn.coach.active {
            background: var(--coach-color);
            border-color: var(--coach-color);
        }

        /* Client Setup (Coach Mode) */
        .client-setup {
            padding: 1rem;
            background: var(--coach-light);
            border-bottom: 2px solid var(--coach-color);
        }

        .client-setup input {
            width: 100%;
            max-width: 400px;
            padding: 0.75rem 1rem;
            border: 2px solid var(--coach-color);
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-family: inherit;
            margin: 0 auto;
            display: block;
        }

        .client-setup input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        /* Settings Section */
        .settings-section {
            padding: 0.75rem 1rem;
            background: var(--coach-light);
            border-bottom: 1px solid var(--coach-color);
        }

        .settings-row {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .settings-group {
            flex: 1;
            min-width: 150px;
        }

        .settings-group label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--coach-color);
            margin-bottom: 0.25rem;
        }

        .settings-input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 2px solid var(--coach-color);
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            font-family: inherit;
            background: var(--bg-white);
        }

        .settings-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        .settings-hint {
            font-size: 0.7rem;
            color: var(--text-light);
            margin-top: 0.5rem;
            text-align: center;
        }

        .btn-small {
            padding: 0.5rem 0.75rem;
            border: none;
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-export {
            background: var(--success);
            color: white;
        }

        .btn-export:hover {
            background: #6BA071;
        }

        .btn-import {
            background: var(--primary);
            color: white;
        }

        .btn-import:hover {
            background: var(--primary-dark);
        }

        .btn-delete {
            background: #e74c3c;
            color: white;
        }

        .btn-delete:hover {
            background: #c0392b;
        }

        /* Verlauf / Historie Styles */
        .mood-chart {
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            gap: 0.5rem;
            padding: 1rem 0.5rem;
            background: linear-gradient(to top, var(--primary-light) 0%, transparent 100%);
            border-radius: var(--radius);
            position: relative;
        }

        .mood-chart::before {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            bottom: 50%;
            border-top: 1px dashed var(--primary);
            opacity: 0.3;
        }

        .mood-bar {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            max-width: 50px;
        }

        .mood-bar-fill {
            width: 100%;
            min-width: 30px;
            border-radius: var(--radius-sm) var(--radius-sm) 0 0;
            transition: height 0.5s ease;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 0.25rem;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
        }

        .mood-bar-fill.mood-low { background: linear-gradient(to top, #e74c3c, #f39c12); }
        .mood-bar-fill.mood-medium { background: linear-gradient(to top, #f39c12, #f1c40f); }
        .mood-bar-fill.mood-high { background: linear-gradient(to top, #2ecc71, #27ae60); }

        .mood-bar-date {
            font-size: 0.65rem;
            color: var(--text-light);
            margin-top: 0.25rem;
            text-align: center;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .history-entry {
            background: var(--background);
            border-radius: var(--radius);
            padding: 1rem;
            border-left: 4px solid var(--primary);
        }

        .history-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .history-entry-date {
            font-weight: 600;
            color: var(--text);
        }

        .history-entry-mood {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.9rem;
        }

        .history-entry-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .history-entry-stat {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .history-entry-note {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-light);
            font-style: italic;
        }

        .mood-chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 180px;
            gap: 0.25rem;
            padding-bottom: 1.5rem;
        }

        .mood-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            max-width: 40px;
        }

        .mood-bar-value {
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .mood-bar-label {
            font-size: 0.6rem;
            color: var(--text-light);
            margin-top: 0.25rem;
            text-align: center;
        }

        .history-date {
            font-weight: 600;
            color: var(--text);
        }

        .history-mood {
            font-size: 0.9rem;
        }

        .history-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 0.25rem;
        }

        .history-stat {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .history-stat.completed {
            color: var(--success);
        }

        .history-note {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-light);
            font-style: italic;
        }

        /* History / Verlauf Styles */
        .mood-chart {
            padding: 1rem 0;
        }

        .mood-chart-bars {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 120px;
            padding: 0.5rem;
            background: var(--bg-cream);
            border-radius: var(--radius-sm);
            gap: 0.3rem;
        }

        .mood-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            max-width: 40px;
        }

        .mood-bar {
            width: 100%;
            background: linear-gradient(to top, var(--primary), var(--accent));
            border-radius: 4px 4px 0 0;
            min-height: 10px;
            transition: height 0.3s ease;
        }

        .mood-bar-label {
            font-size: 0.6rem;
            color: var(--text-light);
            margin-top: 0.3rem;
            text-align: center;
        }

        .mood-bar-value {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.2rem;
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .history-entry {
            padding: 1rem;
            background: var(--bg-cream);
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--primary);
        }

        .history-entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .history-date {
            font-weight: 600;
            color: var(--text-dark);
        }

        .history-mood {
            font-size: 1.2rem;
        }

        .history-stats {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .history-stat {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .history-stat.completed {
            color: var(--success);
        }

        .history-note {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-dark);
            font-style: italic;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            overflow-x: auto;
            background: var(--bg-white);
            padding: 0.5rem;
            gap: 0.5rem;
            border-bottom: 1px solid var(--primary-light);
            -webkit-overflow-scrolling: touch;
        }

        .nav-tabs::-webkit-scrollbar {
            display: none;
        }

        .tab-btn {
            flex: 1;
            min-width: 70px;
            padding: 0.6rem 0.75rem;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.2rem;
        }

        .tab-btn .icon {
            font-size: 1.2rem;
        }

        .tab-btn:hover {
            background: var(--primary-light);
            color: var(--text-dark);
        }

        .tab-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }

        /* Main Content */
        .main-content {
            padding: 1rem;
            max-width: 600px;
            margin: 0 auto;
            padding-bottom: 120px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Cards */
        .card {
            background: var(--bg-white);
            border-radius: var(--radius);
            padding: 1.25rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--primary-light);
        }

        .card.coach-card {
            border: 2px solid var(--coach-color);
            background: linear-gradient(to bottom, var(--coach-light) 0%, var(--bg-white) 100%);
        }

        .card-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card.coach-card .card-title {
            color: var(--coach-color);
        }

        .coach-badge {
            font-size: 0.7rem;
            background: var(--coach-color);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--primary-light);
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--bg-white);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(196, 164, 132, 0.2);
        }

        .coach-input {
            border-color: var(--coach-color);
        }

        .coach-input:focus {
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        /* Coach Message Display */
        .coach-message {
            background: var(--coach-light);
            border-left: 4px solid var(--coach-color);
            padding: 1rem;
            border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            margin-bottom: 1rem;
        }

        .coach-message-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--coach-color);
            font-size: 0.85rem;
        }

        .coach-message-text {
            color: var(--text-dark);
            white-space: pre-wrap;
        }

        .coach-message-date {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 0.5rem;
        }

        /* Mood Rating */
        .mood-rating {
            display: flex;
            gap: 0.4rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .mood-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--primary-light);
            border-radius: 50%;
            background: var(--bg-white);
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mood-btn:hover {
            border-color: var(--primary);
            transform: scale(1.1);
        }

        .mood-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            transform: scale(1.15);
            box-shadow: var(--shadow);
        }

        /* Checklist Items */
        .checklist {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: var(--bg-cream);
            border-radius: var(--radius-sm);
            border: 1px solid var(--primary-light);
            transition: all 0.3s ease;
        }

        .checklist-item.coach-task {
            background: var(--coach-light);
            border-color: var(--coach-color);
        }

        .checklist-item.completed {
            background: var(--success-light);
            border-color: var(--success);
        }

        .checklist-item.completed .item-text {
            text-decoration: line-through;
            color: var(--text-light);
        }

        .checkbox-custom {
            width: 24px;
            height: 24px;
            border: 2px solid var(--primary);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .checkbox-custom:hover {
            background: var(--primary-light);
        }

        .checkbox-custom.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .checkbox-custom.checked::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
        }

        .item-content {
            flex: 1;
            min-width: 0;
        }

        .item-text {
            font-weight: 500;
            word-break: break-word;
            font-size: 0.95rem;
        }

        .item-meta {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 0.2rem;
        }

        .delete-btn {
            width: 30px;
            height: 30px;
            border: none;
            background: transparent;
            color: var(--accent);
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .delete-btn:hover {
            background: var(--accent-light);
            color: var(--primary-dark);
        }

        /* Priority Badge */
        .priority-badge {
            font-size: 0.65rem;
            padding: 0.15rem 0.4rem;
            border-radius: 20px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .priority-hoch {
            background: #FFE5E5;
            color: #D46A6A;
        }

        .priority-mittel {
            background: #FFF3E0;
            color: #E09C4A;
        }

        .priority-niedrig {
            background: var(--success-light);
            color: var(--success);
        }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            box-shadow: var(--shadow);
        }

        .btn-coach {
            background: var(--coach-color);
            color: white;
        }

        .btn-coach:hover {
            background: #7C3AED;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #6BA071;
        }

        .btn-block {
            width: 100%;
            padding: 1rem;
            font-size: 1rem;
        }

        .btn-icon {
            padding: 0.75rem;
            min-width: 44px;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* Add Form */
        .add-form {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .add-form input {
            flex: 1;
            min-width: 120px;
        }

        /* Meal Type Selector */
        .meal-type-selector {
            display: flex;
            gap: 0.4rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .meal-type-btn {
            padding: 0.4rem 0.8rem;
            border: 2px solid var(--primary-light);
            border-radius: 20px;
            background: var(--bg-white);
            font-family: inherit;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .meal-type-btn:hover {
            border-color: var(--primary);
        }

        .meal-type-btn.selected {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        /* Entry List */
        .entry-list {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .entry-item {
            padding: 0.75rem 1rem;
            background: var(--bg-cream);
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--primary);
        }

        .entry-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.3rem;
        }

        .entry-date {
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .entry-text {
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 1.5rem;
            color: var(--text-light);
        }

        .empty-state .icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            opacity: 0.5;
        }

        /* Bottom Actions */
        .bottom-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1rem;
            background: linear-gradient(to top, var(--bg-cream) 80%, transparent);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .bottom-actions .btn {
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        /* Success Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal {
            background: var(--bg-white);
            border-radius: var(--radius);
            padding: 1.5rem;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: var(--shadow-hover);
        }

        .modal h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: var(--success);
            margin-bottom: 1rem;
        }

        .modal .link-box {
            background: var(--bg-cream);
            border: 2px solid var(--primary-light);
            border-radius: var(--radius-sm);
            padding: 0.75rem;
            margin: 1rem 0;
            word-break: break-all;
            font-size: 0.85rem;
            color: var(--text-dark);
        }

        .modal .btn {
            margin-top: 0.5rem;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 140px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--success);
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-hover);
            opacity: 0;
            transition: all 0.4s ease;
            z-index: 1000;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Hide elements based on mode */
        .coach-only {
            display: none;
        }

        body.coach-mode .coach-only {
            display: block;
        }

        body.coach-mode .client-only {
            display: none;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .logo {
                font-size: 1.4rem;
            }
            
            .tab-btn {
                font-size: 0.7rem;
                padding: 0.5rem;
            }
            
            .tab-btn .icon {
                font-size: 1rem;
            }

            .mood-btn {
                width: 34px;
                height: 34px;
                font-size: 0.8rem;
            }
        }
    
        
        /* Client-specific overrides */
        .header {
            position: relative !important;
            padding: 0.75rem 1rem !important;
        }
        .header .logo {
            font-size: 1.2rem !important;
        }
        .header .subtitle {
            display: none !important;
        }
        .header .client-name-display {
            position: absolute !important;
            right: 1rem !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            margin: 0 !important;
            font-size: 0.85rem !important;
            padding: 0.3rem 0.6rem !important;
        }
        .nav-tabs {
            position: sticky !important;
            top: 0 !important;
            z-index: 100 !important;
        }
        .main-content {
            padding-top: 0.5rem !important;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo">Coaching <span>by</span> Tatjana</div>
        <div class="subtitle">Pers√∂nlicher Coaching-Plan</div>
        <div class="client-name-display">üë§ Tatjana</div>
    </header>

    <nav class="nav-tabs">
        <button class="tab-btn active" data-tab="nachrichten"><span class="icon">üí¨</span>Nachrichten</button>
        <button class="tab-btn" data-tab="mindset"><span class="icon">üí≠</span>Mindset</button>
        <button class="tab-btn" data-tab="mahlzeiten"><span class="icon">üçΩÔ∏è</span>Mahlzeiten</button>
        <button class="tab-btn" data-tab="aufgaben"><span class="icon">‚úÖ</span>Aufgaben</button>
        <button class="tab-btn" data-tab="einkauf"><span class="icon">üõí</span>Einkauf</button>
        <button class="tab-btn" data-tab="verlauf"><span class="icon">üìà</span>Verlauf</button>
    </nav>

    <main class="main-content">
        <!-- NACHRICHTEN TAB -->
        <div id="nachrichten" class="tab-content active">
            <div class="card">
                <h2 class="card-title">üí¨ Nachrichten von Tatjana</h2>
                <div id="messagesList"></div>
            </div>
            <div class="card">
                <h2 class="card-title">‚úâÔ∏è Deine Antwort an Tatjana</h2>
                <textarea class="form-textarea" id="clientReply" placeholder="Schreibe Tatjana eine Nachricht..."></textarea>
            </div>
        </div>

        <!-- MINDSET TAB -->
        <div id="mindset" class="tab-content">
            <div id="mindsetTipDisplay" style="display: none;">
                <div class="coach-message">
                    <div class="coach-message-header">üí° Tatjanas Tipp f√ºr dich</div>
                    <div class="coach-message-text" id="mindsetTipText"></div>
                </div>
            </div>
            <div class="card">
                <h2 class="card-title">üåü Wie f√ºhlst du dich heute?</h2>
                <div class="mood-rating" id="moodRating">
                    <button class="mood-btn" data-mood="1">1</button><button class="mood-btn" data-mood="2">2</button><button class="mood-btn" data-mood="3">3</button><button class="mood-btn" data-mood="4">4</button><button class="mood-btn" data-mood="5">5</button><button class="mood-btn" data-mood="6">6</button><button class="mood-btn" data-mood="7">7</button><button class="mood-btn" data-mood="8">8</button><button class="mood-btn" data-mood="9">9</button><button class="mood-btn" data-mood="10">10</button>
                </div>
            </div>
            <div class="card">
                <h2 class="card-title">üí™ Was motiviert dich heute?</h2>
                <textarea class="form-textarea" id="motivation" placeholder="Schreib auf, was dich heute antreibt..."></textarea>
            </div>
            <div class="card">
                <h2 class="card-title">üôè Wof√ºr bist du dankbar?</h2>
                <textarea class="form-textarea" id="dankbarkeit" placeholder="3 Dinge, f√ºr die du heute dankbar bist..."></textarea>
            </div>
            <div class="card">
                <h2 class="card-title">üåô Tagesreflexion</h2>
                <textarea class="form-textarea" id="reflexion" placeholder="Wie war dein Tag? Was hast du gelernt?"></textarea>
            </div>
        </div>

        <!-- MAHLZEITEN TAB -->
        <div id="mahlzeiten" class="tab-content">
            <div id="foodTipDisplay" style="display: none;">
                <div class="coach-message">
                    <div class="coach-message-header">ü•ó Tatjanas Ern√§hrungs-Tipp</div>
                    <div class="coach-message-text" id="foodTipText"></div>
                </div>
            </div>
            <div class="card">
                <h2 class="card-title">üçΩÔ∏è Mahlzeit eintragen</h2>
                <div class="meal-type-selector" id="mealType">
                    <button class="meal-type-btn selected" data-type="Fr√ºhst√ºck">üåÖ Fr√ºhst√ºck</button>
                    <button class="meal-type-btn" data-type="Mittag">‚òÄÔ∏è Mittag</button>
                    <button class="meal-type-btn" data-type="Abend">üåô Abend</button>
                    <button class="meal-type-btn" data-type="Snack">üçé Snack</button>
                </div>
                <div class="form-group">
                    <textarea class="form-textarea" id="mealDescription" placeholder="Was hast du gegessen?"></textarea>
                </div>
                <button class="btn btn-primary btn-block" onclick="addMeal()">+ Mahlzeit hinzuf√ºgen</button>
            </div>
            <div class="card">
                <h2 class="card-title">üìã Heutige Mahlzeiten</h2>
                <div class="entry-list" id="mealList"></div>
            </div>
        </div>

        <!-- AUFGABEN TAB -->
        <div id="aufgaben" class="tab-content">
            <div class="card">
                <h2 class="card-title">‚úÖ Deine Aufgaben</h2>
                <div class="checklist" id="taskList"></div>
            </div>
            <div class="card">
                <h2 class="card-title">‚ûï Eigene Aufgabe</h2>
                <div class="add-form">
                    <input type="text" class="form-input" id="clientTask" placeholder="Deine eigene Aufgabe...">
                    <button class="btn btn-primary btn-icon" onclick="addClientTask()">+</button>
                </div>
            </div>
        </div>

        <!-- EINKAUF TAB -->
        <div id="einkauf" class="tab-content">
            <div class="card">
                <h2 class="card-title">üõí Einkaufsliste</h2>
                <div class="add-form">
                    <input type="text" class="form-input" id="clientShopItem" placeholder="Artikel hinzuf√ºgen...">
                    <button class="btn btn-primary btn-icon" onclick="addClientShopItem()">+</button>
                </div>
                <div class="checklist" id="shoppingList"></div>
            </div>
        </div>

        <!-- VERLAUF TAB -->
        <div id="verlauf" class="tab-content">
            <div class="card">
                <h2 class="card-title">üìà Mein Stimmungs-Verlauf</h2>
                <div class="mood-chart" id="moodChart">
                    <div class="empty-state"><div class="icon">üìä</div><p>Noch keine Eintr√§ge</p></div>
                </div>
            </div>
            <div class="card">
                <h2 class="card-title">üìã Meine letzten Eintr√§ge</h2>
                <div class="history-list" id="historyList">
                    <div class="empty-state"><div class="icon">üìÖ</div><p>Noch keine Historie</p></div>
                </div>
            </div>
        </div>
    </main>

    <div class="bottom-actions">
        <button class="btn btn-success btn-block" onclick="sendToCoach()">üì§ An Tatjana senden</button>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        var appData = {"clientName":"Tatjana","lastUpdated":"2026-01-27T11:47:52.261Z","coachMessages":[{"id":1769511848249,"text":"Hey","date":"27.1.2026 12:04"},{"id":1769513804892,"text":"okay","date":"27.1.2026 12:36"}],"coachMindsetTip":"super cool","coachFoodTip":"bier ok","coachTasks":[{"id":1769511872506,"text":"bier trinken","done":false,"isCoach":true},{"id":1769513839364,"text":"merh kiffen","done":false,"isCoach":true}],"coachShopItems":[{"id":1769511880044,"text":"mehr √§pfel","done":false,"isCoach":true},{"id":1769513845513,"text":"und bohnen","done":false,"isCoach":true}],"clientReply":"","mindset":{"mood":null,"motivation":"","dankbarkeit":"","reflexion":""},"mahlzeiten":[],"clientTasks":[],"clientShopItems":[],"history":[]};
        var webhookUrl = 'https://flow.zoho.eu/20077340494/flow/webhook/incoming?zapikey=1001.3a1905b30f50dd264b19d05d9c1b463a.aa932e68201ea64597b9c071d53b71c3&isdebug=false';

        // Init
        document.addEventListener('DOMContentLoaded', function() {
            initTabs();
            initMoodButtons();
            initMealTypeButtons();
            loadFromLocalStorage();
            renderAll();
            initAutoSave();
        });

        function initTabs() {
            document.querySelectorAll('.tab-btn').forEach(function(btn) {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.tab-btn').forEach(function(b) { b.classList.remove('active'); });
                    document.querySelectorAll('.tab-content').forEach(function(c) { c.classList.remove('active'); });
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab).classList.add('active');
                });
            });
        }

        function initMoodButtons() {
            document.querySelectorAll('.mood-btn').forEach(function(btn) {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mood-btn').forEach(function(b) { b.classList.remove('selected'); });
                    btn.classList.add('selected');
                    appData.mindset.mood = parseInt(btn.dataset.mood);
                    saveToLocalStorage();
                });
            });
        }

        function initMealTypeButtons() {
            document.querySelectorAll('.meal-type-btn').forEach(function(btn) {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.meal-type-btn').forEach(function(b) { b.classList.remove('selected'); });
                    btn.classList.add('selected');
                });
            });
        }

        function initAutoSave() {
            ['motivation', 'dankbarkeit', 'reflexion', 'clientReply'].forEach(function(id) {
                var el = document.getElementById(id);
                if (el) {
                    el.addEventListener('input', function() {
                        if (id === 'clientReply') appData.clientReply = el.value;
                        else appData.mindset[id] = el.value;
                        saveToLocalStorage();
                    });
                }
            });
        }

        function getStorageKey() {
            return 'coaching-' + (appData.clientName || 'default').toLowerCase().replace(/[^a-z0-9]/g, '');
        }

        function saveToLocalStorage() {
            var data = {
                savedAt: new Date().toISOString(),
                clientReply: appData.clientReply || '',
                mindset: appData.mindset,
                mahlzeiten: appData.mahlzeiten || [],
                clientTasks: appData.clientTasks || [],
                clientShopItems: appData.clientShopItems || [],
                coachTasksDone: appData.coachTasks.filter(function(t) { return t.done; }).map(function(t) { return t.id; }),
                coachShopDone: appData.coachShopItems.filter(function(i) { return i.done; }).map(function(i) { return i.id; }),
                history: appData.history || []
            };
            localStorage.setItem(getStorageKey(), JSON.stringify(data));
        }

        function loadFromLocalStorage() {
            try {
                var saved = localStorage.getItem(getStorageKey());
                if (saved) {
                    var data = JSON.parse(saved);
                    appData.clientReply = data.clientReply || '';
                    if (data.mindset) appData.mindset = data.mindset;
                    if (data.mahlzeiten) appData.mahlzeiten = data.mahlzeiten;
                    if (data.clientTasks) appData.clientTasks = data.clientTasks;
                    if (data.clientShopItems) appData.clientShopItems = data.clientShopItems;
                    if (data.history) appData.history = data.history;
                    if (data.coachTasksDone) {
                        data.coachTasksDone.forEach(function(id) {
                            var task = appData.coachTasks.find(function(t) { return t.id === id; });
                            if (task) task.done = true;
                        });
                    }
                    if (data.coachShopDone) {
                        data.coachShopDone.forEach(function(id) {
                            var item = appData.coachShopItems.find(function(i) { return i.id === id; });
                            if (item) item.done = true;
                        });
                    }
                }
            } catch(e) { console.log('LocalStorage error:', e); }
        }

        function renderAll() {
            renderMessages();
            renderTasks();
            renderShopping();
            renderMeals();
            renderHistory();
            
            if (appData.coachMindsetTip) {
                document.getElementById('mindsetTipDisplay').style.display = 'block';
                document.getElementById('mindsetTipText').textContent = appData.coachMindsetTip;
            }
            if (appData.coachFoodTip) {
                document.getElementById('foodTipDisplay').style.display = 'block';
                document.getElementById('foodTipText').textContent = appData.coachFoodTip;
            }
            if (appData.mindset.mood) {
                var btn = document.querySelector('.mood-btn[data-mood="' + appData.mindset.mood + '"]');
                if (btn) btn.classList.add('selected');
            }
            document.getElementById('motivation').value = appData.mindset.motivation || '';
            document.getElementById('dankbarkeit').value = appData.mindset.dankbarkeit || '';
            document.getElementById('reflexion').value = appData.mindset.reflexion || '';
            document.getElementById('clientReply').value = appData.clientReply || '';
        }

        function getMoodEmoji(mood) {
            if (!mood) return 'üòê';
            if (mood <= 2) return 'üò¢';
            if (mood <= 4) return 'üòï';
            if (mood <= 6) return 'üòê';
            if (mood <= 8) return 'üôÇ';
            return 'üòÑ';
        }

        function renderHistory() {
            var chartEl = document.getElementById('moodChart');
            var listEl = document.getElementById('historyList');
            if (!chartEl || !listEl) return;
            
            var history = appData.history || [];
            
            if (history.length === 0) {
                chartEl.innerHTML = '<div class="empty-state"><div class="icon">üìä</div><p>Noch keine Eintr√§ge</p></div>';
                listEl.innerHTML = '<div class="empty-state"><div class="icon">üìÖ</div><p>Noch keine Historie</p></div>';
                return;
            }
            
            var chartData = history.slice(-10);
            var maxMood = 10;
            chartEl.innerHTML = '<div class="mood-chart-bars">' + 
                chartData.map(function(entry) {
                    var height = (entry.mood / maxMood) * 100;
                    var emoji = getMoodEmoji(entry.mood);
                    return '<div class="mood-bar-container">' +
                        '<div class="mood-bar-value">' + emoji + '</div>' +
                        '<div class="mood-bar" style="height: ' + height + '%;"></div>' +
                        '<div class="mood-bar-label">' + entry.date.split('.').slice(0,2).join('.') + '</div>' +
                    '</div>';
                }).join('') +
            '</div>';
            
            var sortedHistory = history.slice().reverse().slice(0, 10);
            listEl.innerHTML = sortedHistory.map(function(entry) {
                var tasksDone = entry.tasksCompleted || 0;
                var tasksTotal = entry.tasksTotal || 0;
                var emoji = getMoodEmoji(entry.mood);
                return '<div class="history-entry">' +
                    '<div class="history-entry-header">' +
                        '<span class="history-date">üìÖ ' + entry.date + '</span>' +
                        '<span class="history-mood">' + emoji + ' ' + entry.mood + '/10</span>' +
                    '</div>' +
                    '<div class="history-stats">' +
                        (tasksTotal > 0 ? '<span class="history-stat ' + (tasksDone === tasksTotal ? 'completed' : '') + '">‚úÖ Aufgaben: ' + tasksDone + '/' + tasksTotal + '</span>' : '') +
                        (entry.mealsCount ? '<span class="history-stat">üçΩÔ∏è ' + entry.mealsCount + ' Mahlzeiten</span>' : '') +
                    '</div>' +
                    (entry.note ? '<div class="history-note">"' + entry.note.substring(0, 100) + (entry.note.length > 100 ? '...' : '') + '"</div>' : '') +
                '</div>';
            }).join('');
        }

        function renderMessages() {
            var list = document.getElementById('messagesList');
            if (!appData.coachMessages || appData.coachMessages.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="icon">üí¨</div><p>Noch keine Nachrichten</p></div>';
                return;
            }
            list.innerHTML = appData.coachMessages.map(function(msg) {
                return '<div class="coach-message"><div class="coach-message-header">üíú Tatjana</div><div class="coach-message-text">' + msg.text + '</div><div class="coach-message-date">' + msg.date + '</div></div>';
            }).join('');
        }

        function renderTasks() {
            var list = document.getElementById('taskList');
            var all = (appData.coachTasks || []).concat(appData.clientTasks || []);
            if (all.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="icon">üìù</div><p>Keine Aufgaben</p></div>';
                return;
            }
            list.innerHTML = all.map(function(task) {
                var isCoach = task.isCoach !== false && appData.coachTasks.some(function(t) { return t.id === task.id; });
                return '<div class="checklist-item ' + (isCoach ? 'coach-task' : '') + ' ' + (task.done ? 'completed' : '') + '">' +
                    '<div class="checkbox-custom ' + (task.done ? 'checked' : '') + '" onclick="toggleTask(' + task.id + ')"></div>' +
                    '<div class="item-content"><div class="item-text">' + task.text + '</div>' +
                    (isCoach ? '<div class="item-meta">üìã Von Tatjana</div>' : '') + '</div>' +
                    (!isCoach ? '<button class="delete-btn" onclick="deleteTask(' + task.id + ')">√ó</button>' : '') +
                    '</div>';
            }).join('');
        }

        function toggleTask(id) {
            var task = appData.coachTasks.find(function(t) { return t.id === id; }) || appData.clientTasks.find(function(t) { return t.id === id; });
            if (task) { task.done = !task.done; saveToLocalStorage(); renderTasks(); }
        }

        function deleteTask(id) {
            appData.clientTasks = appData.clientTasks.filter(function(t) { return t.id !== id; });
            saveToLocalStorage(); renderTasks();
        }

        function addClientTask() {
            var input = document.getElementById('clientTask');
            var text = input.value.trim();
            if (!text) return;
            appData.clientTasks = appData.clientTasks || [];
            appData.clientTasks.push({ id: Date.now(), text: text, done: false });
            input.value = '';
            saveToLocalStorage(); renderTasks();
            showToast('Aufgabe hinzugef√ºgt ‚úì');
        }

        function renderShopping() {
            var list = document.getElementById('shoppingList');
            var all = (appData.coachShopItems || []).concat(appData.clientShopItems || []);
            if (all.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="icon">üõí</div><p>Einkaufsliste leer</p></div>';
                return;
            }
            list.innerHTML = all.map(function(item) {
                var isCoach = item.isCoach !== false && appData.coachShopItems.some(function(i) { return i.id === item.id; });
                return '<div class="checklist-item ' + (isCoach ? 'coach-task' : '') + ' ' + (item.done ? 'completed' : '') + '">' +
                    '<div class="checkbox-custom ' + (item.done ? 'checked' : '') + '" onclick="toggleShop(' + item.id + ')"></div>' +
                    '<div class="item-content"><div class="item-text">' + item.text + '</div>' +
                    (isCoach ? '<div class="item-meta">üíú Empfohlen von Tatjana</div>' : '') + '</div>' +
                    (!isCoach ? '<button class="delete-btn" onclick="deleteShop(' + item.id + ')">√ó</button>' : '') +
                    '</div>';
            }).join('');
        }

        function toggleShop(id) {
            var item = appData.coachShopItems.find(function(i) { return i.id === id; }) || appData.clientShopItems.find(function(i) { return i.id === id; });
            if (item) { item.done = !item.done; saveToLocalStorage(); renderShopping(); }
        }

        function deleteShop(id) {
            appData.clientShopItems = appData.clientShopItems.filter(function(i) { return i.id !== id; });
            saveToLocalStorage(); renderShopping();
        }

        function addClientShopItem() {
            var input = document.getElementById('clientShopItem');
            var text = input.value.trim();
            if (!text) return;
            appData.clientShopItems = appData.clientShopItems || [];
            appData.clientShopItems.push({ id: Date.now(), text: text, done: false });
            input.value = '';
            saveToLocalStorage(); renderShopping();
            showToast('Artikel hinzugef√ºgt ‚úì');
        }

        function addMeal() {
            var typeBtn = document.querySelector('.meal-type-btn.selected');
            var type = typeBtn ? typeBtn.dataset.type : 'Mahlzeit';
            var desc = document.getElementById('mealDescription').value.trim();
            if (!desc) { showToast('Bitte beschreibe die Mahlzeit'); return; }
            appData.mahlzeiten = appData.mahlzeiten || [];
            appData.mahlzeiten.push({
                id: Date.now(),
                type: type,
                description: desc,
                time: new Date().toLocaleTimeString('de-CH', {hour: '2-digit', minute: '2-digit'})
            });
            document.getElementById('mealDescription').value = '';
            saveToLocalStorage(); renderMeals();
            showToast('Mahlzeit hinzugef√ºgt ‚úì');
        }

        function renderMeals() {
            var list = document.getElementById('mealList');
            if (!appData.mahlzeiten || appData.mahlzeiten.length === 0) {
                list.innerHTML = '<div class="empty-state"><div class="icon">üçΩÔ∏è</div><p>Noch keine Mahlzeiten</p></div>';
                return;
            }
            var emojis = {'Fr√ºhst√ºck': 'üåÖ', 'Mittag': '‚òÄÔ∏è', 'Abend': 'üåô', 'Snack': 'üçé'};
            list.innerHTML = appData.mahlzeiten.map(function(m) {
                return '<div class="entry-item"><div class="entry-header"><strong>' + (emojis[m.type] || 'üçΩÔ∏è') + ' ' + m.type + '</strong><span class="entry-date">' + m.time + '</span></div><div class="entry-text">' + m.description + '</div></div>';
            }).join('');
        }

        function sendToCoach() {
            appData.clientReply = document.getElementById('clientReply').value || '';
            appData.mindset.motivation = document.getElementById('motivation').value || '';
            appData.mindset.dankbarkeit = document.getElementById('dankbarkeit').value || '';
            appData.mindset.reflexion = document.getElementById('reflexion').value || '';

            // Historie-Eintrag erstellen
            var today = new Date().toLocaleDateString('de-CH');
            var tasksTotal = (appData.coachTasks || []).length + (appData.clientTasks || []).length;
            var tasksDone = (appData.coachTasks || []).filter(function(t) { return t.done; }).length +
                           (appData.clientTasks || []).filter(function(t) { return t.done; }).length;
            var mealsCount = (appData.mahlzeiten || []).length;
            
            var historyEntry = {
                date: today,
                mood: appData.mindset.mood || 0,
                tasksCompleted: tasksDone,
                tasksTotal: tasksTotal,
                mealsCount: mealsCount,
                note: appData.mindset.reflexion || appData.clientReply || ''
            };
            
            // Pr√ºfen ob heute schon ein Eintrag existiert
            appData.history = appData.history || [];
            var existingIndex = appData.history.findIndex(function(h) { return h.date === today; });
            if (existingIndex >= 0) {
                appData.history[existingIndex] = historyEntry;
            } else {
                appData.history.push(historyEntry);
            }

            // URL-Parameter aufbauen (GET-Request)
            var params = new URLSearchParams();
            params.append('clientName', appData.clientName || '');
            params.append('date', today);
            params.append('time', new Date().toLocaleTimeString('de-CH', {hour: '2-digit', minute: '2-digit'}));
            params.append('mood', appData.mindset.mood || 5);
            params.append('reply', (appData.clientReply || '').substring(0, 500));
            params.append('motivation', (appData.mindset.motivation || '').substring(0, 500));
            params.append('dankbarkeit', (appData.mindset.dankbarkeit || '').substring(0, 500));
            params.append('reflexion', (appData.mindset.reflexion || '').substring(0, 500));
            params.append('tasksCompleted', tasksDone);
            params.append('tasksTotal', tasksTotal);
            params.append('mealsCount', mealsCount);
            
            // Mahlzeiten als formatierten Text
            var mahlzeitenText = (appData.mahlzeiten || []).map(function(m) {
                var emoji = {'Fr√ºhst√ºck': 'üåÖ', 'Mittag': '‚òÄÔ∏è', 'Abend': 'üåô', 'Snack': 'üçé'}[m.type] || 'üçΩÔ∏è';
                return emoji + ' ' + m.type + ' (' + m.time + '): ' + m.description;
            }).join(' | ');
            params.append('mahlzeiten', mahlzeitenText.substring(0, 1000));
            
            // Aufgaben als Text
            var tasksText = (appData.coachTasks || []).concat(appData.clientTasks || []).map(function(t) {
                return (t.done ? '‚úÖ' : '‚¨ú') + ' ' + t.text;
            }).join(' | ');
            params.append('tasks', tasksText.substring(0, 1000));

            showToast('Wird gesendet... üì§');

            // Send via GET
            var fullUrl = webhookUrl + '&' + params.toString();
            
            fetch(fullUrl, {
                method: 'GET',
                mode: 'no-cors'
            }).then(function() {
                showToast('An Tatjana gesendet! ‚úì');
                saveToLocalStorage();
                renderHistory();
            }).catch(function(err) {
                console.error('Error:', err);
                saveToLocalStorage();
                renderHistory();
                showToast('Lokal gespeichert ‚úì');
            });
        }

        function showToast(msg) {
            var toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(function() { toast.classList.remove('show'); }, 3000);
        }

        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
                if (e.target.id === 'clientTask') addClientTask();
                if (e.target.id === 'clientShopItem') addClientShopItem();
            }
        });
    </script>
</body>
</html>